[gd_scene load_steps=13 format=2]

[ext_resource path="res://assets/sprites/stages/backgroundPhase.png" type="Texture" id=1]
[ext_resource path="res://assets/sprites/stages/backgroundPlanet.png" type="Texture" id=2]
[ext_resource path="res://assets/sprites/stages/score.png" type="Texture" id=3]
[ext_resource path="res://assets/sprites/dumpsters/organic.png" type="Texture" id=4]
[ext_resource path="res://assets/sprites/dumpsters/glass.png" type="Texture" id=5]
[ext_resource path="res://assets/sprites/dumpsters/plastic.png" type="Texture" id=6]
[ext_resource path="res://assets/sprites/dumpsters/metal.png" type="Texture" id=7]
[ext_resource path="res://assets/sprites/dumpsters/paper.png" type="Texture" id=8]
[ext_resource path="res://assets/sprites/stages/config.png" type="Texture" id=9]
[ext_resource path="res://assets/sprites/planets/happy.png" type="Texture" id=10]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

const new_soda = preload(\"res://scenes/trashs/metal/soda.tscn\")

const new_bottle = preload(\"res://scenes/trashs/glass/bottle.tscn\")

const new_paper = preload(\"res://scenes/trashs/paper/paper.tscn\")
const new_paper_ball = preload(\"res://scenes/trashs/paper/paperBall.tscn\")

const new_apple = preload(\"res://scenes/trashs/organic/apple.tscn\")
const new_banana = preload(\"res://scenes/trashs/organic/banana.tscn\")
const new_snack = preload(\"res://scenes/trashs/organic/snack.tscn\")

const new_bag = preload(\"res://scenes/trashs/plastic/bag.tscn\")
const new_bowl = preload(\"res://scenes/trashs/plastic/bowl.tscn\")
const new_glass = preload(\"res://scenes/trashs/plastic/glassPlastic.tscn\")

const planet_worried = preload(\"res://assets/sprites/planets/worried.png\")
const planet_sad = preload(\"res://assets/sprites/planets/sad.png\")
const planet_dead = preload(\"res://assets/sprites/planets/dead.png\")

const trashs = [
	new_soda, new_bottle, new_paper,
	new_paper_ball, new_apple, new_banana,
	new_snack, new_bag, new_bowl, new_glass
];

func _ready():
	pass

func spawn_trash():

	var trash = trashs[int(rand_range(0, trashs.size() - 1))].instance()
	#var trash = trashs[1].instance()
	trash.position.x = int(rand_range(0, 600))
	trash.position.y = 0
	
	get_node('container').add_child(trash)
	pass

func _on_timer_timeout():
	spawn_trash()
	pass 


func _on_plasticTrash_area_entered(area):
	if area.name.ends_with('Plastic'):
		print('Plastic')
	pass 

func _on_metalTrash_area_entered(area):
	if area.name.ends_with('Metal'):
		print('Metal')
	pass 


func _on_paperTrash_area_entered(area):
	if area.name.ends_with('Paper'):
		print('Paper')
	pass 


func _on_glassTrash_area_entered(area):
	if area.name.ends_with('Glass'):
		print('Glass')
	pass 


func _on_organicTrash_area_entered(area):
	if area.name.ends_with('Organic'):
		print('Organic')
	pass
"

[sub_resource type="CapsuleShape2D" id=2]
radius = 69.496
height = 128.521

[node name="main" type="Node"]
script = SubResource( 1 )

[node name="backgrounds" type="Node2D" parent="."]
editor/display_folded = true

[node name="main" type="Sprite" parent="backgrounds"]
position = Vector2( 361.323, 511.75 )
scale = Vector2( 0.768741, 0.679974 )
texture = ExtResource( 1 )

[node name="planet" type="Sprite" parent="backgrounds"]
position = Vector2( 357.946, 1152.27 )
scale = Vector2( 0.668316, 0.662877 )
z_index = 1
texture = ExtResource( 2 )

[node name="score" type="Sprite" parent="backgrounds"]
position = Vector2( 119.583, 1128.86 )
scale = Vector2( 0.5, 0.5 )
z_index = 2
texture = ExtResource( 3 )

[node name="dumpsters" type="Node" parent="."]
editor/display_folded = true

[node name="organicTrash" type="Node2D" parent="dumpsters"]
editor/display_folded = true

[node name="organic" type="Sprite" parent="dumpsters/organicTrash"]
position = Vector2( 67.848, 980 )
scale = Vector2( 0.75, 0.75 )
texture = ExtResource( 4 )

[node name="organicTrash" type="Area2D" parent="dumpsters/organicTrash"]

[node name="colisionOrganic" type="CollisionShape2D" parent="dumpsters/organicTrash/organicTrash"]
position = Vector2( 68.332, 1007 )
shape = SubResource( 2 )

[node name="glassTrash" type="Node2D" parent="dumpsters"]
editor/display_folded = true

[node name="glass" type="Sprite" parent="dumpsters/glassTrash"]
position = Vector2( 212.291, 980 )
scale = Vector2( 0.75, 0.75 )
texture = ExtResource( 5 )

[node name="glassTrash" type="Area2D" parent="dumpsters/glassTrash"]

[node name="colisionGlass" type="CollisionShape2D" parent="dumpsters/glassTrash/glassTrash"]
position = Vector2( 212.765, 1007 )
shape = SubResource( 2 )

[node name="plasticTrash" type="Node2D" parent="dumpsters"]
editor/display_folded = true

[node name="plastic" type="Sprite" parent="dumpsters/plasticTrash"]
position = Vector2( 357.337, 980 )
scale = Vector2( 0.75, 0.75 )
texture = ExtResource( 6 )

[node name="plasticTrash" type="Area2D" parent="dumpsters/plasticTrash"]

[node name="colisionPlastic" type="CollisionShape2D" parent="dumpsters/plasticTrash/plasticTrash"]
position = Vector2( 357.916, 1007 )
shape = SubResource( 2 )

[node name="metalTrash" type="Node2D" parent="dumpsters"]
editor/display_folded = true

[node name="metal" type="Sprite" parent="dumpsters/metalTrash"]
position = Vector2( 505.28, 980 )
scale = Vector2( 0.75, 0.75 )
texture = ExtResource( 7 )

[node name="metalTrash" type="Area2D" parent="dumpsters/metalTrash"]

[node name="colisionMetal" type="CollisionShape2D" parent="dumpsters/metalTrash/metalTrash"]
position = Vector2( 504.863, 1007 )
shape = SubResource( 2 )

[node name="paperTrash" type="Node2D" parent="dumpsters"]
editor/display_folded = true

[node name="paper" type="Sprite" parent="dumpsters/paperTrash"]
position = Vector2( 651.232, 980 )
scale = Vector2( 0.75, 0.75 )
texture = ExtResource( 8 )

[node name="paperTrash" type="Area2D" parent="dumpsters/paperTrash"]
editor/display_folded = true

[node name="colisionPaper" type="CollisionShape2D" parent="dumpsters/paperTrash/paperTrash"]
position = Vector2( 650.41, 1007 )
shape = SubResource( 2 )

[node name="container" type="Node" parent="."]

[node name="timer" type="Timer" parent="."]
autostart = true

[node name="config" type="Node2D" parent="."]
editor/display_folded = true

[node name="Sprite" type="Sprite" parent="config"]
modulate = Color( 0.662745, 0.662745, 0.662745, 1 )
position = Vector2( 619.44, 1155.17 )
z_index = 2
texture = ExtResource( 9 )

[node name="planet" type="Node2D" parent="."]

[node name="planet" type="Sprite" parent="planet"]
position = Vector2( 367.03, 1151.44 )
scale = Vector2( 0.55, 0.55 )
z_index = 2
texture = ExtResource( 10 )
[connection signal="area_entered" from="dumpsters/organicTrash/organicTrash" to="." method="_on_organicTrash_area_entered"]
[connection signal="area_entered" from="dumpsters/glassTrash/glassTrash" to="." method="_on_glassTrash_area_entered"]
[connection signal="area_entered" from="dumpsters/plasticTrash/plasticTrash" to="." method="_on_plasticTrash_area_entered"]
[connection signal="area_entered" from="dumpsters/metalTrash/metalTrash" to="." method="_on_metalTrash_area_entered"]
[connection signal="area_entered" from="dumpsters/paperTrash/paperTrash" to="." method="_on_paperTrash_area_entered"]
[connection signal="timeout" from="timer" to="." method="_on_timer_timeout"]
[connection signal="texture_changed" from="planet/planet" to="." method="_on_planet_texture_changed"]
